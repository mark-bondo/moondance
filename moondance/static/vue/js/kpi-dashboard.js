(function(t){function e(e){for(var r,s,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},n={"kpi-dashboard":0},i=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("ac66")},"0c57":function(t,e,a){},"39c5":function(t,e,a){"use strict";a("7a5d")},"5c8b":function(t,e,a){},"7a5d":function(t,e,a){},ac66:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2d26"),a("96cf");var r=a("2ef0"),n=a.n(r),i=a("2b0e"),s=a("2f62"),o={state:{dashboard:{}}};i["default"].use(s["a"]);var l=new s["a"].Store({modules:{kpi:o}}),c=l,d=a("ce5b"),u=a.n(d);a("bf40");i["default"].use(u.a);var p={},h=new u.a(p),m=a("4452"),v=a.n(m),f=a("ea7f"),b=a.n(f),y=a("bc3a"),g=a.n(y),x=(a("5363"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-card",{attrs:{height:"100%"}},[a("v-app-bar",{staticStyle:{height:"86.19px","border-radius":"0px"},attrs:{color:"#302752",dark:"","hide-on-scroll":""}},[a("v-app-bar-nav-icon",{staticStyle:{"margin-top":"20px"},on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("v-spacer"),a("v-toolbar-title",{staticStyle:{"margin-top":"20px"}},[a("h2",[t._v(t._s(t.headerTitle))])]),a("v-spacer")],1),a("v-navigation-drawer",{attrs:{absolute:"",bottom:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",[a("v-subheader",[a("v-icon",{staticClass:"pr-3"},[t._v("mdi-chart-bar")]),t._v("Dashboards")],1),a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"}},[t._l(t.dashboards,(function(e){return a("v-list-item",{key:e.id,on:{click:function(a){return t.menuActionClick(e)}}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)})),a("v-divider"),a("v-subheader",[a("v-icon",{staticClass:"pr-3"},[t._v("mdi-tools")]),t._v("Admin")],1),t._l(t.admin,(function(e){return a("v-list-item",{key:e.id,on:{click:function(a){return t.menuActionClick(e)}}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)}))],2)],1)],1),a("v-card-text",{staticClass:"ma-0 pa-0"},["dashboard"===t.selectedItem.type?a("div",[a("dashboard",{attrs:{dashboardId:t.selectedItem.id}})],1):"Product Sales"===t.selectedItem?a("div",[a("product-sales",{attrs:{commatize:t.commatize,getChartData:t.getChartData}})],1):t._e()])],1)],1)}),_=[],C=(a("b680"),a("ac1f"),a("1276"),a("d3b7"),a("25f0"),a("5319"),a("99af"),a("159b"),a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-card",[a("v-card-title",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"4"}},[t._v(" Sales by Product")])],1),a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Products"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.productData,search:t.search,"items-per-page":10,expanded:t.expanded,"item-key":"name","show-expand":"","fixed-header":"","multi-sort":"",loading:t.gridLoading,"loading-text":"Saponifying Data... Please wait"},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"item.name",fn:function(e){var r=e.item;return[a("span",{staticClass:"med-text"},[t._v(t._s(r.name))])]}},{key:"item.total_quantity",fn:function(e){var r=e.item;return[a("span",{staticClass:"big-text"},[t._v(t._s(t.commatize(r.total_quantity)))])]}},{key:"item.average_quantity",fn:function(e){var r=e.item;return[a("span",{staticClass:"big-text"},[t._v(t._s(t.commatize(r.average_quantity)))])]}},{key:"item.phased_quantity",fn:function(e){var r=e.item;return[a("chart",{attrs:{chartData:r.phased_quantity,options:r.options,commatize:t.commatize}})]}},{key:"item.total_sales",fn:function(e){var r=e.item;return[a("span",{staticClass:"big-text"},[t._v("$"+t._s(t.commatize(r.total_sales)))])]}},{key:"item.phased_sales",fn:function(e){var r=e.item;return[a("chart",{attrs:{chartData:r.phased_sales,options:r.options,commatize:t.commatize}})]}},{key:"item.total_margin",fn:function(e){var r=e.item;return[a("span",{staticClass:"big-text"},[t._v("$"+t._s(t.commatize(r.total_margin)))])]}},{key:"item.phased_margin",fn:function(e){var r=e.item;return[a("chart",{attrs:{chartData:r.phased_sales,options:r.options,commatize:t.commatize}})]}}])})],1)],1)],1)}),w=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-card",[a("v-card-title",{staticClass:"justify-center pa-0"},[a("v-toolbar",{attrs:{dense:"",dark:"",color:"#554e6e"}},[a("v-spacer"),a("v-toolbar-title",[t._v(t._s(t.extraOptions.title))]),a("v-spacer"),a("v-menu",{attrs:{left:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-chart-box-outline")])],1)]}}])},[a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"},model:{value:t.extraOptions.selectedChartType,callback:function(e){t.$set(t.extraOptions,"selectedChartType",e)},expression:"extraOptions.selectedChartType"}},[a("v-list",t._l(t.chartMenu,(function(e){return a("v-list-item",{key:e.type,on:{click:function(a){return t.changeChartType(e)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.type))])],1)],1)})),1)],1)],1)],1)],1),a("v-card-text",[a("v-row",[a("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[a("bread-crumbs",{attrs:{AvailableDrillDowns:t.AvailableDrillDowns,addedBreadCrumb:t.addedBreadCrumb,drillDowns:t.drillDowns,selectedFilterValue:t.selectedFilterValue},on:{updateDrillDowns:t.updateDrillDowns}})],1)],1),a("v-row",[a("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[a("highcharts",{ref:"chartComponent",staticClass:"chart",attrs:{options:t.localOptions}}),a("v-menu",{attrs:{"position-x":t.menu.x,"position-y":t.menu.y,"offset-y":""},model:{value:t.menu.show,callback:function(e){t.$set(t.menu,"show",e)},expression:"menu.show"}},[a("v-card",[a("v-card-text",{staticClass:"pa-1"},[a("v-list",{attrs:{dense:""}},[a("v-subheader",[t._v("Drill Down Options")]),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.AvailableDrillDowns,(function(e){return a("v-list-item",{key:e.value,on:{click:function(a){return t.drillDownSelected(e)}}},[!1===e.isBreadCrumb?a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1):t._e()],1)})),1),a("v-divider")],1)],1)],1)],1)],1)],1)],1)],1)],1)},O=[],k=(a("4de4"),a("7db0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-breadcrumbs",{staticClass:"pa-0",attrs:{items:t.visibleBreadCrumbs},scopedSlots:t._u([{key:"item",fn:function(e){var r=e.item;return[a("v-breadcrumbs-item",[a("v-menu",{attrs:{"offset-y":"",disabled:!(!0===r.isCurrent)},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-chip",t._g(t._b({staticClass:"ma-2",attrs:{label:"","text-color":"white",color:r.icon.color,value:r.value},on:{click:function(e){return t.removeBreadCrumb(r)}}},"v-chip",i,!1),n),[null!==r.filter?a("span",[t._v(t._s(r.filter))]):a("span",[t._v(t._s(r.text))]),a("v-icon",{staticClass:"ml-1",domProps:{textContent:t._s(r.icon.current)}})],1)]}}],null,!0)},[a("v-list",t._l(t.AvailableDrillDowns,(function(e,n){return a("v-list-item",{key:e.value,attrs:{value:n,link:"",dense:""},on:{click:function(a){return t.breadCrumbMenuClick(e,r)}}},[a("v-list-item-title",[t._v(t._s(e.text))])],1)})),1)],1)],1)]}},{key:"divider",fn:function(){return[a("v-icon",[t._v("mdi-chevron-right")])]},proxy:!0}])})],1)}),P=[],S={name:"BreadCrumbs",props:["drillDowns","AvailableDrillDowns","addedBreadCrumb","selectedFilterValue"],data:function(){return{iconMap:{true:{current:"mdi-eye-outline",color:"success"},false:{current:"mdi-filter-outline",color:"grey"}}}},computed:{visibleBreadCrumbs:function(){return this.drillDowns.filter((function(t){return!0===t.isBreadCrumb}))}},watch:{addedBreadCrumb:function(t){var e=n.a.find(this.drillDowns,{isCurrent:!0});e=Object.assign(e,{isCurrent:!1,isBreadCrumb:!0,icon:this.iconMap[!1],filter:this.selectedFilterValue}),Object.assign(t,{isCurrent:!0,isBreadCrumb:!0,icon:this.iconMap[!0],sortOrder:e.sortOrder+10}),this.$emit("updateDrillDowns",n.a.orderBy(this.drillDowns,"sortOrder"))}},beforeMount:function(){},methods:{removeBreadCrumb:function(t){!0!==t.isCurrent&&(Object.assign(t,{isCurrent:!1,isBreadCrumb:!1,filter:null,icon:this.iconMap[!1],sortOrder:0}),this.$emit("updateDrillDowns",n.a.orderBy(this.drillDowns,"sortOrder")))},breadCrumbMenuClick:function(t,e){var a=Object.assign({},t),r=Object.assign({},e);Object.assign(e,{text:a.text,value:a.value,filter:a.filter}),Object.assign(t,{text:r.text,value:r.value,filter:r.filter}),this.$emit("updateDrillDowns",n.a.orderBy(this.drillDowns,"sortOrder"))}}},M=S,j=(a("f13e"),a("2877")),B=Object(j["a"])(M,k,P,!1,null,null,null),A=B.exports,$={name:"Chart",props:["chartId","dashboardId"],components:{BreadCrumbs:A},data:function(){return{menu:{show:!1,x:0,y:0},iconMap:{true:{current:"mdi-eye-outline",color:"success"},false:{current:"mdi-filter-outline",color:"grey"}},chartMenu:[{category:"summary",type:"pie",icon:"mdi-chart-pie",isActive:!0},{category:"phased",type:"area",icon:"mdi-chart-areaspline-variant",isActive:!1},{category:"phased",type:"line",icon:"mdi-chart-line",isActive:!1},{category:"phased",type:"spline",icon:"mdi-chart-bell-curve-cumulative",isActive:!1},{category:"phased",type:"bar",icon:"mdi-chart-gantt",isActive:!1},{category:"phased",type:"column",icon:"mdi-chart-bar",isActive:!1}],drillDowns:[],selectedFilterValue:null,addedBreadCrumb:null,extraOptions:{title:"Loading Chart",selectedChartType:null},isInitialLoad:!0,localOptions:{title:{text:""},credits:!1,chart:{backgroundColor:"transparent",style:{overflow:"visible"},type:null},tooltip:{hideDelay:0,outside:!0,shared:!1,valueDecimals:0,pointFormat:"{series.name}: <b>{point.y}</b><br/>"},plotOptions:{pie:{dataLabels:{enabled:!0,format:"<b>{point.name}</b><br>{point.y:,.0f} ({point.percentage:.1f}%)"}}},legend:{enabled:!0},xAxis:{dateTimeLabelFormats:{month:"%b %Y",year:"%Y"}},series:[]}}},computed:{AvailableDrillDowns:function(){return n.a.sortBy(this.drillDowns.filter((function(t){return!1===t.isBreadCrumb})),"text")}},beforeMount:function(){this.chartStore=this.$store.state.kpi.dashboard[this.dashboardId][this.chartId]={},this.getData()},methods:{changeChartType:function(t){this.selectedChartType=t.type,this.localOptions.chart.type=t.type,t.category!==this.extraOptions.chartCategory?(this.extraOptions.chartCategory=t.category,this.getData()):this.extraOptions.chartCategory=t.category},getData:function(){var t=this;this.localOptions.series=[],this.$http.post("chart/".concat(this.chartId),{filters:n.a.reject(this.drillDowns,{filter:null}),grouping:n.a.find(this.drillDowns,{isCurrent:!0}),chartCategory:this.extraOptions.chartCategory}).then((function(e){var a=e.data.highCharts;t.extraOptions=e.data.extraOptions,t.isInitialLoad&&(t.drillDowns=t.extraOptions.drillDowns,t.drillDowns.forEach((function(e){return e.icon=t.iconMap[e.isCurrent]})),n.a.merge(t.localOptions,a),t.localOptions.series=[]),t.parseSeries(a.series),t.isInitialLoad=!1}))},parseSeries:function(t){var e=this;t="phased"===this.extraOptions.chartCategory?this.parseDates(t):t,n.a.forEach(t,(function(t){e.localOptions.series.push(Object.assign(t,{point:e.createPointEvent()}))}))},createPointEvent:function(){var t=this;return{events:{click:function(e){t.showDrillMenu(e)}}}},parseDates:function(t){for(var e=0;e<t.length;e++)for(var a=t[e],r=0;r<a.data.length;r++)a.data[r][0]=Date.parse(a.data[r][0]);return t},showDrillMenu:function(t){this.menu.show=!1,this.selectedFilterValue="phased"===this.extraOptions.chartCategory?t.point.series.name:this.selectedFilterValue=t.point.name,this.menu={x:t.clientX,y:t.clientY,show:!0}},drillDownSelected:function(t){this.addedBreadCrumb=t},updateDrillDowns:function(t){this.drillDowns=t,this.getData()}}},F=$,I=Object(j["a"])(F,D,O,!1,null,null,null),T=I.exports,E={name:"ProductSales",components:{Chart:T},props:["commatize","getChartData"],data:function(){return{selectedProductFamily:{text:"All Products",value:"All Products"},gridLoading:!0,productFamilies:[],productData:[],search:"",expanded:[],headers:[{text:"",value:"data-table-expand"},{text:"Name",sortable:!0,filterable:!0,value:"name"},{text:"Total Quantity",value:"total_quantity",sortable:!0},{text:"Average Quantity",value:"average_quantity"},{text:"Quantity by Month",value:"phased_quantity",sortable:!1,align:" d-none d-lg-table-cell"},{text:"Total Sales",value:"total_sales",sortable:!0},{text:"Sales by Month",value:"phased_sales",sortable:!1,align:" d-none d-lg-table-cell"},{text:"Total Margin",value:"total_margin",sortable:!0},{text:"Margin by Month",value:"phased_margin",sortable:!1,align:" d-none d-lg-table-cell"}]}},computed:{},watch:{selectedProductFamily:function(t){this.gridLoading=!0,this.getProductData(t.value)}},beforeMount:function(){this.getProductData(this.selectedProductFamily.value),this.getProductFamilies()},methods:{getProductFamilies:function(){var t=this;this.$http.get("../product-family/",{}).then((function(e){t.productFamilies=[t.selectedProductFamily].concat(e.data)}))},getProductData:function(t){var e=this,a=this.productData;this.$http.get("../product-data/".concat(t),{}).then((function(t){var r={options:{title:"Product Family Sales by Month",chartCategory:"phased",type:"area",prefix:"$",width:160,height:65,xAxis:{title:{text:""},type:"category",categories:t.data[0].xaxis,dateTimeLabelFormats:{month:"%b %Y",year:"%Y"}},legend:{enabled:!1}}};t.data.forEach((function(t){a.push(Object.assign(t,r))})),e.gridLoading=!1}))}}},z=E,L=(a("39c5"),Object(j["a"])(z,C,w,!1,null,null,null)),V=L.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{height:"calc(100% - 86.19px)"}},[a("v-card-title"),a("v-card-text",[a("v-row",t._l(t.charts,(function(e){return a("v-col",{key:e,attrs:{cols:"12",xs:"12",lg:"6"}},[a("chart",{attrs:{chartId:e,dashboardId:t.dashboardId}})],1)})),1)],1)],1)},N=[],H={name:"Dashboard",components:{Chart:T},props:["dashboardId"],data:function(){return{}},computed:{charts:function(){return this.$store.state.kpi.dashboard[this.dashboardId].charts}},watch:{},beforeMount:function(){},methods:{}},R=H,Y=Object(j["a"])(R,q,N,!1,null,null,null),U=Y.exports,Q={name:"KPIDashboard",components:{ProductSales:V,Dashboard:U},props:[],data:function(){return{selectedItem:{},dashboards:[],admin:[{id:0,name:"Data Manager",type:"admin"}],headerTitle:"Home",drawer:!1}},beforeMount:function(){this.getDashboards()},methods:{commatize:function(t){var e=t<0?"-":"";t=Math.abs(t).toFixed(0);var a=t.toString().split(".");return a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"".concat(e).concat(a[0])},getDashboards:function(){var t=this;this.$http.get("dashboards/",{}).then((function(e){var a=t;n.a.forEach(e.data,(function(t){a.dashboards.push(t),a.$store.state.kpi.dashboard[t.id]=t}))}))},menuActionClick:function(t){this.drawer=!1,"Data Manager"===t.name?window.open("/data-manager/","_blank").focus():this.headerTitle=t.name,this.selectedItem=t}},watch:{}},J=Q,K=(a("d95c"),Object(j["a"])(J,x,_,!1,null,null,null)),X=K.exports;function Z(t,e){document.getElementById(e)&&new i["default"]({vuetify:h,Highcharts:b.a,HighchartsVue:v.a,store:c,render:function(e){return e(t)}}).$mount("#".concat(e))}b.a.setOptions({lang:{decimalPoint:".",resetZoom:"Reset",thousandsSep:","}}),g.a.defaults.xsrfCookieName="csrftoken",g.a.defaults.xsrfHeaderName="X-CSRFTOKEN",i["default"].prototype.$http=g.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_HOST_URL}),i["default"].prototype.$_=n.a,i["default"].use(v.a),i["default"].config.productionTip=!1,Z(X,"kpi-dashboard")},d95c:function(t,e,a){"use strict";a("5c8b")},f13e:function(t,e,a){"use strict";a("0c57")}});